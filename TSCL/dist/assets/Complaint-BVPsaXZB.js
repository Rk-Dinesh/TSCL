import{c as B,a as i,r as o,u as Y,o as Z,j as e,m as ee,b as k,A as S,B as q,d as P,I as ge,F as Q,k as ue,R as j,i as be,D as ye}from"./index-C-tKFev5.js";const A=[{id:1,title:"Complaint Details"},{id:2,title:"Escalation Details"}],W=B().shape({complaint_type_title:i().required("complaint_type is required"),dept_name:i().test("not-select","select an Department",a=>a!==""&&a!=="Select an Department"),tat_type:i().test("not-select","select an TAT Type",a=>a!==""&&a!=="Select Type"),tat_duration:i().required("Duration is required"),priority:i().required("Priority is required")}),je=B().shape({escalation_type:i().test("not-select","select an Type",a=>a!==""&&a!=="Select Type"),escalation_l1:i().required("L1 duration is required"),role_l1:i().test("not-select","select an L1 role",a=>a!==""&&a!=="Select an Role"),escalation_l2:i().optional(),role_l2:i().optional(),escalation_l3:i().optional(),role_l3:i().optional()}),fe=a=>{const[n,N]=o.useState(0),{ExistingDept:D,ExistingRoles:_}=a;let y;switch(n){case 0:y=W;break;case 1:y=je;break;default:y=W}o.useEffect(()=>{},[n]);const{register:x,formState:{errors:s},handleSubmit:C}=Y({resolver:Z(y),mode:"all"}),v=async c=>{if(n!==A.length-1)N(n+1);else{const u={...c,status:"active",created_by_user:"admin"};try{const w=sessionStorage.getItem("token"),f=await k.post(`${S}/complaint/post`,u,{headers:{Authorization:`Bearer ${w}`}});f.status===200?(q.success("Complaint created Successfully"),a.toggleModal(),a.handlerefresh()):(console.error("Error in posting data",f),q.error("Failed to Upload"))}catch(w){console.error("Error in posting data",w)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex justify-center items-center flex-wrap",children:e.jsx("div",{className:"overflow-hidden shadow-lg bg-white flex items-end justify-between relative font-alegerya mx-2 ",children:e.jsx("div",{className:"min-w-[390px] min-h-[350px] ",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center px-5 text-white bg-primary h-12 flex-wrap",children:[e.jsx("p",{className:"",children:"New Complaint"}),e.jsx("button",{onClick:a.toggleModal,className:"",children:e.jsx(ee,{className:"text-2xl"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-9 relative justify-center mx-60 py-1 rounded-full bg-slate-200 mt-4",children:A.map((c,u)=>e.jsxs("div",{className:"relative items-center item flex last:flex-none group",children:[e.jsx("div",{className:`${n>=u?"bg-black text-white":"bg-white text-slate-900"} transition duration-150 icon-box h-8 w-8 rounded-full flex flex-col items-center justify-center relative z-[66] text-base font-medium`,children:e.jsx("span",{children:u+1})}),u!==A.length-1&&e.jsx("div",{className:`${n>u?"bg-green-900":"bg-[#E0EAFF]"} absolute top-1/2 h-[2px] w-full z-[65]`})]},u))}),e.jsx("div",{className:"conten-box mx-8 my-4",children:e.jsxs("form",{onSubmit:C(v),children:[n===0&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Create Complaint"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"complaint_type_title",children:"Complaint"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline  col-span-2",id:"complaint_type_title",type:"text",placeholder:"Complaint",...x("complaint_type_title")}),s.complaint_type_title&&e.jsx("p",{className:"text-red-500 text-sm text-start -mt-3",children:s.complaint_type_title.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"dept_name",children:"Department"}),e.jsxs("select",{className:"col-span-2  block outline-none px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("dept_name"),id:"dept_name",children:[e.jsx("option",{value:"",children:"Select an Department"}),D.map(c=>e.jsx("option",{value:c.dept_name,children:c.dept_name},c.dept_id))]}),s.dept_name&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.dept_name.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_type",children:"TAT Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("tat_type"),id:"tat_type",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Month",children:"Month"}),e.jsx("option",{value:"Days",children:"Days"})]}),s.tat_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.tat_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_duration",children:"Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"tat_duration",type:"text",placeholder:"Duration",...x("tat_duration")}),s.tat_duration&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.tat_duration.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"priority",children:"Priority"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("priority"),id:"priority",children:[e.jsx("option",{value:"",children:"Select Priority"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]}),s.priority&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.priority.message})]})]})}),n===1&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Escalation Details"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_type",children:"Escalation Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("escalation_type"),id:"escalation_type",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"Month",children:"Month"}),e.jsx("option",{value:"days",children:"Days"})]}),s.escalation_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.escalation_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l1",children:"L1 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l1",type:"text",placeholder:"L1 Duration",...x("escalation_l1")}),s.escalation_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.escalation_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l1",children:"L1 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("role_l1"),id:"role_l1",children:[e.jsx("option",{value:"",children:"Select an Role"}),_.map(c=>e.jsx("option",{value:c.role_name,children:c.role_name},c.role_id))]}),s.role_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.role_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l2",children:"L2 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l2",type:"text",placeholder:"L2 Duration",...x("escalation_l2")}),s.escalation_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.escalation_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l2",children:"L2 Role"}),e.jsxs("select",{className:"col-span-2  outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("role_l2"),id:"role_l2",children:[e.jsx("option",{value:"",children:"Select an Role"}),_.map(c=>e.jsx("option",{value:c.role_name,children:c.role_name},c.role_id))]}),s.role_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.role_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l3",children:"L3 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l3",type:"text",placeholder:"L3 Duration",...x("escalation_l3")}),s.escalation_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.escalation_l3.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l3",children:"L3 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...x("role_l3"),id:"role_l3",children:[e.jsx("option",{value:"",children:"Select an Role"}),_.map(c=>e.jsx("option",{value:c.role_name,children:c.role_name},c.role_id))]}),s.role_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:s.role_l3.message})]})]})}),e.jsxs("div",{className:"footer flex justify-between items-center py-4 px-12",children:[e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-4 py-1.5 rounded-full",type:"button",onClick:()=>N(n-1),disabled:n===0,children:"Previous"})}),e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-6 py-1.5 rounded-full",type:"submit",children:n===A.length-1?"Save":"Next"})})]})]})})]})]})})})})},I=[{id:1,title:"Complaint Details"},{id:2,title:"Escalation Details"}],X=B().shape({complaint_type_title:i().required("complaint_type is required"),dept_name:i().test("not-select","select an Department",a=>a!==""&&a!=="Select an Department"),tat_type:i().test("not-select","select an TAT Type",a=>a!==""&&a!=="Select Type"),tat_duration:i().required("Duration is required"),priority:i().required("Priority is required")}),_e=B().shape({escalation_type:i().test("not-select","select an Type",a=>a!==""&&a!=="Select Type"),escalation_l1:i().required("L1 duration is required"),role_l1:i().test("not-select","select an L1 role",a=>a!==""&&a!=="Select an Role"),escalation_l2:i().optional(),role_l2:i().optional(),escalation_l3:i().optional(),role_l3:i().optional(),status:i().test("not-select","Please select an Status",a=>a!==""&&a!=="Status")}),Ne=a=>{const[n,N]=o.useState(0),[D,_]=o.useState(null),[y,x]=o.useState(null),[s,C]=o.useState(null),[v,c]=o.useState(null),u=sessionStorage.getItem("token"),{ExistingDept:w,ExistingRoles:f,comptId:E}=a;let F;switch(n){case 0:F=X;break;case 1:F=_e;break;default:F=X}o.useEffect(()=>{},[n]);const{register:h,formState:{errors:l},handleSubmit:M,setValue:g}=Y({resolver:Z(F),mode:"all"});o.useEffect(()=>{(async()=>{try{const m=await k.get(`${S}/complaint/getbyid?complaint_id=${E}`,{headers:{Authorization:`Bearer ${u}`}}),r=P(m.data.data);g("complaint_type_title",r.complaint_type_title),g("dept_name",r.dept_name),_(r.dept_name),g("tat_type",r.tat_type),g("tat_duration",r.tat_duration),g("priority",r.priority),g("escalation_type",r.escalation_type),g("escalation_l1",r.escalation_l1),g("role_l1",r.role_l1),x(r.role_l1),g("escalation_l2",r.escalation_l2),g("role_l2",r.role_l2),C(r.role_l2),g("escalation_l3",r.escalation_l3),g("role_l3",r.role_l3),c(r.role_l3),g("status",r.status)}catch(m){console.error("Error fetching data",m)}})()},[E,g]);const b=async d=>{if(n!==I.length-1)N(n+1);else{const m={...d};try{const r=await k.post(`${S}/complaint/update?complaint_id=${E}`,m,{headers:{Authorization:`Bearer ${u}`}});r.status===200?(q.success("Complaint Updated Successfully"),a.toggleModal(),a.handlerefresh()):(console.error("Error in posting data",r),q.error("Failed to Upload"))}catch(r){console.error("Error in posting data",r)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex justify-center items-center flex-wrap",children:e.jsx("div",{className:"overflow-hidden shadow-lg bg-white flex items-end justify-between relative font-alegerya mx-2 ",children:e.jsx("div",{className:"min-w-[390px] min-h-[350px] ",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center px-5 text-white bg-primary h-12 flex-wrap",children:[e.jsx("p",{className:"",children:"New Complaint"}),e.jsx("button",{onClick:a.toggleModal,className:"",children:e.jsx(ee,{className:"text-2xl"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-9 relative justify-center mx-60 py-1 rounded-full bg-slate-200 mt-4",children:I.map((d,m)=>e.jsxs("div",{className:"relative items-center item flex last:flex-none group",children:[e.jsx("div",{className:`${n>=m?"bg-black text-white":"bg-white text-slate-900"} transition duration-150 icon-box h-8 w-8 rounded-full flex flex-col items-center justify-center relative z-[66] text-base font-medium`,children:e.jsx("span",{children:m+1})}),m!==I.length-1&&e.jsx("div",{className:`${n>m?"bg-green-900":"bg-[#E0EAFF]"} absolute top-1/2 h-[2px] w-full z-[65]`})]},m))}),e.jsx("div",{className:"conten-box mx-8 my-4",children:e.jsxs("form",{onSubmit:M(b),children:[n===0&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Create Complaint"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"complaint_type_title",children:"Complaint"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline  col-span-2",id:"complaint_type_title",type:"text",placeholder:"Complaint",...h("complaint_type_title")}),l.complaint_type_title&&e.jsx("p",{className:"text-red-500 text-sm text-start -mt-3",children:l.complaint_type_title.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"dept_name",children:"Department"}),e.jsxs("select",{className:"col-span-2  block outline-none px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("dept_name"),id:"dept_name",children:[e.jsx("option",{value:D,children:D}),w.map(d=>e.jsx("option",{value:d.dept_name,children:d.dept_name},d.dept_id))]}),l.dept_name&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.dept_name.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_type",children:"TAT Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("tat_type"),id:"tat_type",children:[e.jsx("option",{value:"",hidden:!0,children:"Select Type"}),e.jsx("option",{value:"Month",children:"Month"}),e.jsx("option",{value:"Days",children:"Days"})]}),l.tat_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.tat_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_duration",children:"Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"tat_duration",type:"text",placeholder:"Duration",...h("tat_duration")}),l.tat_duration&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.tat_duration.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"priority",children:"Priority"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("priority"),id:"priority",children:[e.jsx("option",{value:"",hidden:!0,children:"Select Priority"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]}),l.priority&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.priority.message})]})]})}),n===1&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Escalation Details"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_type",children:"Escalation Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("escalation_type"),id:"escalation_type",children:[e.jsx("option",{value:"",hidden:!0,children:"Select Type"}),e.jsx("option",{value:"Month",children:"Month"}),e.jsx("option",{value:"days",children:"Days"})]}),l.escalation_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l1",children:"L1 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l1",type:"text",placeholder:"L1 Duration",...h("escalation_l1")}),l.escalation_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l1",children:"L1 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("role_l1"),id:"role_l1",children:[e.jsx("option",{value:y,disabled:!0,children:y}),f.map(d=>e.jsx("option",{value:d.role_name,children:d.role_name},d.role_id))]}),l.role_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.role_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l2",children:"L2 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l2",type:"text",placeholder:"L2 Duration",...h("escalation_l2")}),l.escalation_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l2",children:"L2 Role"}),e.jsxs("select",{className:"col-span-2  outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("role_l2"),id:"role_l2",children:[e.jsx("option",{value:s,disabled:!0,children:s}),f.map(d=>e.jsx("option",{value:d.role_name,children:d.role_name},d.role_id))]}),l.role_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.role_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l3",children:"L3 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l3",type:"text",placeholder:"L3 Duration",...h("escalation_l3")}),l.escalation_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_l3.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l3",children:"L3 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...h("role_l3"),id:"role_l3",children:[e.jsx("option",{value:v,disabled:!0,children:v}),f.map(d=>e.jsx("option",{value:d.role_name,children:d.role_name},d.role_id))]}),l.role_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.role_l3.message})]}),e.jsxs("div",{className:" grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"status",children:"Status:"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",id:"status",...h("status"),children:[e.jsx("option",{value:"",hidden:!0,children:"Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"InActive"})]}),l.status&&e.jsx("p",{className:"text-red-500 text-xs text-center mb-3 ",children:l.status.message})]})]})}),e.jsxs("div",{className:"footer flex justify-between items-center py-4 px-12",children:[e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-4 py-1.5 rounded-full",type:"button",onClick:()=>N(n-1),disabled:n===0,children:"Previous"})}),e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-6 py-1.5 rounded-full",type:"submit",children:n===I.length-1?"Save":"Next"})})]})]})})]})]})})})})},ke=({permissions:a})=>{const n=a==null?void 0:a.includes("create"),N=a==null?void 0:a.includes("edit"),D=a==null?void 0:a.includes("delete"),[_,y]=o.useState(!1),[x,s]=o.useState(!1),[C,v]=o.useState(!1),[c,u]=o.useState(null),[w,f]=o.useState(null),[E,F]=o.useState(null),[h,l]=o.useState(null),[M,g]=o.useState(""),[b,d]=o.useState(1),[m]=o.useState(8),[r,te]=o.useState(1),[ve,ae]=o.useState([]),[O,se]=o.useState([]),[V,le]=o.useState(null),$=sessionStorage.getItem("token"),U=t=>{le(V===t?null:t)},re=t=>V===t;o.useEffect(()=>{z(),oe(),ne()},[M,b]);const L=t=>{t>0&&t<=r&&d(t)},z=()=>{k.get(`${S}/complaint/get`,{headers:{Authorization:`Bearer ${$}`}}).then(t=>{const p=P(t.data.data);se(p);const J=p.filter(pe=>Object.values(pe).some(he=>he.toString().toLowerCase().includes(M.toLowerCase())));te(Math.ceil(J.length/m));const K=b*m,me=K-m;ae(J.slice(me,K))}).catch(t=>{console.error(t)})},ne=async()=>{try{const t=await k.get(`${S}/role/getactive`,{headers:{Authorization:`Bearer ${$}`}}),p=P(t.data.data);F(p)}catch(t){console.error("Error fetching existing Roles:",t)}},oe=async()=>{try{const t=await k.get(`${S}/department/getactive`,{headers:{Authorization:`Bearer ${$}`}}),p=P(t.data.data);l(p)}catch(t){console.error("Error fetching existing Department:",t)}},ie=()=>{y(!_)},ce=()=>{s(!x),f(null)},H=()=>{v(!C),u(null)},R=b*m,T=R-m,G=O.filter(t=>Object.values(t).some(p=>p.toString().toLowerCase().includes(M.toLowerCase()))),de=G.slice(T,R),xe=async()=>{try{await k.delete(`${S}/complaint/delete?complaint_id=${c}`,{headers:{Authorization:`Bearer ${$}`}}),H(),z(),toast.success("Deleted successfully")}catch{toast.error("Failed to delete")}};return e.jsxs(o.Fragment,{children:[e.jsx("div",{className:"  bg-blue-100 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"h-screen",children:[e.jsxs("div",{className:"flex flex-row md:justify-end gap-3 p-2 mt-3 mx-8 flex-wrap",children:[e.jsxs("p",{className:"flex items-center gap-3 bg-white px-3 py-1.5 rounded-full",children:[e.jsx(ge,{className:"text-xl"}),e.jsx("input",{type:"search",className:"outline-none bg-transparent text-base",placeholder:"Search Complaint",value:M,onChange:t=>g(t.target.value)})]}),n&&e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 border-blue-500 font-lexend bg-slate-100 text-blue-500 rounded-full px-3 py-1.5 justify-center",children:[" ",e.jsx(Q,{}),"Bulk Upload"]})}),e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 bg-slate-100  font-lexend text-black rounded-full px-3 py-1.5 w-28 justify-between",children:[" ","CSV ",e.jsx(ue,{})]})})]}),e.jsxs("div",{className:"flex justify-between items-center my-2 mx-8 gap-1 flex-wrap",children:[e.jsx("h1",{className:"md:text-xl text-lg font-medium ",children:"Complaint "}),n&&e.jsxs("button",{className:"flex flex-row-2 gap-2  font-lexend items-center border-2 bg-blue-500 text-white rounded-full p-2.5 w-fit justify-between md:text-base text-sm",onClick:()=>y(!0),children:[e.jsx(Q,{})," Add Complaint"]})]}),e.jsx("div",{className:"bg-white mx-4 rounded-lg my-3 overflow-x-auto h-3/5 no-scrollbar",children:e.jsxs("table",{className:"w-full  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300 py-1",children:[e.jsx("th",{className:"py-2",children:e.jsx("p",{className:" mx-6 my-2 font-lexend font-semibold whitespace-nowrap",children:"#"})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Complaint  ",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Department",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["TAT Type",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Duration",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Priority",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Escalation-1",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Escalation-2",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Escalation-3",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Status",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["CreatedBy",e.jsx(j,{})]})}),e.jsx("th",{children:e.jsx("p",{className:"mx-3 my-3 text-center font-lexend font-semibold whitespace-nowrap",children:"Action"})})]})}),e.jsx("tbody",{children:de.map((t,p)=>e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("td",{children:e.jsxs("p",{className:"text-center text-sm mx-3 my-2 font-lexend whitespace-nowrap text-gray-700",children:["  ",T+p+1<10?`0${T+p+1}`:T+p+1]})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.complaint_type_title})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2  font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.dept_name})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2  font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.tat_type})}),e.jsx("td",{children:e.jsx("p",{className:" mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.tat_duration})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.priority})}),e.jsx("td",{children:e.jsxs("div",{className:"mx-1.5 my-3 flex gap-3 items-center justify-start text-sm font-lexend",children:[e.jsx("p",{className:" whitespace-nowrap  bg-gray-100 px-2 py-1 rounded-full capitalize text-gray-700",children:t.escalation_l1}),e.jsx("p",{className:"  whitespace-nowrap text-start text-sm capitalize  text-gray-700",children:t.role_l1})]})}),e.jsx("td",{children:e.jsxs("div",{className:"mx-1.5 my-3 flex gap-3 items-center justify-start  font-lexend",children:[e.jsx("p",{className:" whitespace-nowrap bg-gray-100 px-2 py-1 rounded-full text-start text-sm capitalize text-gray-700",children:t&&t.escalation_l2?t.escalation_l2:"---"}),e.jsx("p",{className:" whitespace-nowrap text-sm capitalize text-gray-700",children:t&&t.role_l2?t.role_l2:"---"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"mx-1.5 my-3 flex gap-3 items-center justify-start  font-lexend",children:[e.jsx("p",{className:" whitespace-nowrap bg-gray-100 px-2 py-1 rounded-full text-start text-sm capitalize text-gray-700",children:t&&t.escalation_l3?t.escalation_l3:"---"}),e.jsx("p",{className:" whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t&&t.role_l3?t.role_l3:"---"})]})}),e.jsx("td",{children:e.jsx("div",{className:"mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.status})}),e.jsx("td",{children:e.jsx("p",{className:"fmx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.created_by_user})}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-start mx-1.5 my-3",children:[e.jsx(be,{onClick:()=>U(p)}),re(p)&&e.jsxs("div",{className:" bg-white shadow-md rounded-lg ml-1",children:[N&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{s(!0),f(t.complaint_id),U()},children:"Edit"}),D&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{v(!0),u(t.complaint_id),U()},children:"Delete"})]})]})})]},p))})]})}),e.jsx("div",{className:" my-3 mb-5 mx-7",children:e.jsxs("nav",{className:"flex items-center flex-column flex-wrap md:flex-row md:justify-between justify-center pt-4","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-700 mb-4 md:mb-0 block w-full md:inline md:w-auto text-center font-alegerya",children:["Showing"," ",e.jsxs("span",{className:"text-gray-700",children:[T+1," to ",Math.min(R,O.length)]})," ","of ",e.jsxs("span",{className:"text-gray-900",children:[O.length," entries"]})]}),e.jsxs("ul",{className:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8 font-alegerya",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>L(1),disabled:b===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-s-lg hover:bg-paginate-bg hover:text-primary-hover",children:"<<"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>L(b-1),disabled:b===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Back"})}),Array.from({length:r},(t,p)=>p+1).slice(Math.max(0,b-2),Math.min(r,b+1)).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>L(t),className:`flex items-center justify-center px-3 h-8 leading-tight border border-paginate-br hover:text-white hover:bg-primary ${b===t?"bg-primary text-white":"bg-white text-black"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>L(b+1),disabled:R>=G.length,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Next"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>L(r),disabled:b===r,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-e-lg hover:bg-paginate-bg hover:text-primary-hover",children:">>"})})]})]})})]})}),_&&e.jsx(fe,{toggleModal:ie,handlerefresh:z,ExistingDept:h,ExistingRoles:E}),x&&e.jsx(Ne,{toggleModal:ce,handlerefresh:z,ExistingDept:h,ExistingRoles:E,comptId:w}),C&&e.jsx(ye,{toggleDeleteModal:H,delete:xe})]})};export{ke as default};
