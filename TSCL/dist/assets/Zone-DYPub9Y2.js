import{c as O,a as I,u as U,o as V,j as e,b as w,A as v,B as _,r as a,d as q,I as re,F,R as le,e as N,f as L,g as oe,D as ce}from"./index-Ck5knsAu.js";const de=O().shape({zone_name:I().required("Zone_name is required")}),ie=s=>{const{register:o,formState:{errors:m},handleSubmit:u,watch:c}=U({resolver:V(de),mode:"all"}),g=async b=>{const d={...b,status:"active",created_by_user:"admin"};try{const h=sessionStorage.getItem("token"),i=await w.post(`${v}/zone/post`,d,{headers:{Authorization:`Bearer ${h}`}});i.status===200?(_.success("Zone created Successfully"),s.toggleModal(),s.handlerefresh()):(console.error("Error in posting data",i),_.error("Failed to Upload"))}catch(h){console.error("Error in posting data",h)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex  justify-center items-center  ",children:e.jsxs("div",{className:"bg-white w-[522px] h-[340px]  font-lexend m-2",children:[e.jsx("div",{className:"border-b-2 border-gray-300 mx-10",children:e.jsx("h1",{className:"text-xl font-medium pt-10 pb-2",children:"Add Zone"})}),e.jsxs("form",{onSubmit:u(g),children:[e.jsxs("div",{className:"mx-6 my-10",children:[e.jsx("label",{className:"block text-gray-900 text-base font-normal mb-4",htmlFor:"zone_name",children:"Zone Name"}),e.jsx("input",{className:"appearance-none border rounded-lg w-full py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline",id:"zone_name",type:"text",placeholder:"Zone Name",...o("zone_name")}),m.zone_name&&e.jsx("p",{className:"text-red-500",children:m.zone_name.message})]}),e.jsxs("div",{className:"flex justify-end  mx-10 gap-5 ",children:[e.jsx("div",{className:"border border-primary text-primary bg-none font-lexend rounded-3xl px-5 py-1.5",onClick:s.toggleModal,children:"cancel"}),e.jsx("button",{className:" text-white bg-primary font-lexend rounded-3xl px-5 py-1.5",type:"submit",children:"Save"})]})]})]})})},xe=O().shape({zone_name:I().required("Zone_name is required"),status:I().test("not-select","Please select an Status",s=>s!==""&&s!=="Status")}),me=s=>{const{zoneId:o}=s,m=sessionStorage.getItem("token"),{register:u,formState:{errors:c},handleSubmit:g,watch:b,setValue:d}=U({resolver:V(xe),mode:"all"});a.useEffect(()=>{(async()=>{try{const x=await w.get(`${v}/zone/getbyid?zone_id=${o}`,{headers:{Authorization:`Bearer ${m}`}}),l=q(x.data.data);d("zone_name",l.zone_name),d("status",l.status)}catch(x){console.error("Error fetching data",x)}})()},[o,d]);const h=async i=>{const x={...i};try{const l=await w.post(`${v}/zone/update?zone_id=${o}`,x,{headers:{Authorization:`Bearer ${m}`}});l.status===200?(_.success("Zone Updated Successfully"),s.toggleModal(),s.handlerefresh()):(console.error("Error in posting data",l),_.error("Failed to Upload"))}catch(l){console.error("Error in posting data",l)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex  justify-center items-center  ",children:e.jsxs("div",{className:"bg-white w-[522px] h-[340px]  font-lexend m-2",children:[e.jsx("div",{className:"border-b-2 border-gray-300 mx-10",children:e.jsx("h1",{className:"text-xl font-medium pt-10 pb-2",children:"Edit Zone"})}),e.jsxs("form",{onSubmit:g(h),children:[e.jsxs("div",{className:"mx-8 my-6",children:[e.jsx("label",{className:"block text-gray-900 text-base font-normal mb-4",htmlFor:"zone_name",children:"Zone Name"}),e.jsx("input",{className:"appearance-none border rounded-lg w-full py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline",id:"zone_name",type:"text",placeholder:"Zone Name",...u("zone_name")}),c.zone_name&&e.jsx("p",{className:"text-red-500",children:c.zone_name.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:" grid grid-cols-3 mx-10 my-6",children:[e.jsx("label",{className:" text-gray-900 text-base font-normal  col-span-1",htmlFor:"status",children:"Status:"}),e.jsxs("select",{className:"   text-sm text-black border border-gray-900 rounded-lg  border-none outline-none",id:"status",...u("status"),children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"InActive"})]})]}),c.status&&e.jsx("p",{className:"text-red-500 text-xs text-center -mt-4 mb-2 ",children:c.status.message})]}),e.jsxs("div",{className:"flex justify-end  mx-10 gap-5 ",children:[e.jsx("div",{className:"border border-primary text-primary bg-none font-lexend rounded-3xl px-5 py-1.5",onClick:s.toggleModal,children:"cancel"}),e.jsx("button",{className:" text-white bg-primary font-lexend rounded-3xl px-5 py-1.5",type:"submit",children:"Save"})]})]})]})})},ge=({permissions:s})=>{const o=s==null?void 0:s.includes("create"),m=s==null?void 0:s.includes("edit"),u=s==null?void 0:s.includes("delete"),[c,g]=a.useState(!1),[b,d]=a.useState(!1),[h,i]=a.useState(null),[x,l]=a.useState(!1),[R,M]=a.useState(null),[S,T]=a.useState(""),[r,G]=a.useState(1),[p]=a.useState(8),[f,H]=a.useState(1),[he,J]=a.useState([]),[C,K]=a.useState([]),[Z,Q]=a.useState(null),A=sessionStorage.getItem("token"),D=t=>{Q(Z===t?null:t)},W=t=>Z===t;a.useEffect(()=>{k()},[S,r]);const j=t=>{t>0&&t<=f&&G(t)},k=()=>{w.get(`${v}/zone/get`,{headers:{Authorization:`Bearer ${A}`}}).then(t=>{const n=q(t.data.data);K(n);const P=n.filter(ae=>Object.values(ae).some(ne=>ne.toString().toLowerCase().includes(S.toLowerCase())));H(Math.ceil(P.length/p));const B=r*p,se=B-p;J(P.slice(se,B))})},X=()=>{g(!c)},Y=()=>{d(!b),i(null)},$=()=>{l(!x),M(null)},z=r*p,y=z-p,E=C.filter(t=>Object.values(t).some(n=>n.toString().toLowerCase().includes(S.toLowerCase()))),ee=E.slice(y,z),te=async()=>{try{await w.delete(`${v}/zone/delete?zone_id=${R}`,{headers:{Authorization:`Bearer ${A}`}}),$(),k(),toast.success("Deleted successfully")}catch{toast.error("Failed to delete")}};return e.jsxs(a.Fragment,{children:[e.jsx("div",{className:"  bg-blue-100 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"h-screen ",children:[e.jsxs("div",{className:"flex flex-row md:justify-end gap-3 p-2 mt-3 mx-8 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-1.5 rounded-full",children:[e.jsx(re,{className:"text-xl"}),e.jsx("input",{type:"search",className:"outline-none bg-transparent text-base",placeholder:"Search Zone",value:S,onChange:t=>T(t.target.value)})]}),o&&e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 border-blue-500 font-lexend bg-slate-100 text-blue-500 rounded-full px-3 py-1.5 justify-center",children:[" ",e.jsx(F,{}),"Bulk Upload"]})}),e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 bg-slate-100  font-lexend text-black rounded-full py-1.5 px-3 w-28 justify-between",children:[" ","CSV ",e.jsx(le,{})]})})]}),e.jsxs("div",{className:"flex justify-between items-center my-2 mx-8 flex-wrap gap-1",children:[e.jsx("h1",{className:"md:text-xl text-lg font-medium ",children:"Zone"}),o&&e.jsxs("button",{className:"flex flex-row-2 gap-2  font-lexend items-center border-2 bg-blue-500 text-white rounded-full py-2 px-3 justify-between md:text-base text-sm",onClick:()=>g(!0),children:[e.jsx(F,{})," Add Zone"]})]}),e.jsx("div",{className:"bg-white mx-4 rounded-lg my-3  h-3/5 ",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar ",children:e.jsxs("table",{className:"w-full mt-3 ",children:[e.jsx("thead",{className:" border-b-2 border-gray-300",children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"",children:e.jsx("p",{className:" mx-6 my-2 font-lexend font-semibold whitespace-nowrap",children:"#"})}),e.jsx("th",{className:"",children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5 my-2 font-lexend font-semibold",children:["Zone ",e.jsx(N,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center mx-1.5  my-2 font-lexend justify-start font-semibold  whitespace-nowrap",children:["Status ",e.jsx(N,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold",children:["CreatedBy ",e.jsx(N,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold",children:["CreatedAt",e.jsx(N,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold",children:["UpdatedAt",e.jsx(N,{})]})}),e.jsx("th",{children:e.jsx("p",{className:"text-center mx-1.5 my-3 font-lexend font-semibold",children:"Action"})})]})}),e.jsx("tbody",{children:ee.map((t,n)=>e.jsxs("tr",{className:"border-b-2 border-gray-300 ",children:[e.jsx("td",{className:"",children:e.jsx("div",{className:"items-center mx-6 my-2 font-lexend whitespace-nowrap text-sm text-center",children:y+n+1<10?`0${y+n+1}`:y+n+1})}),e.jsx("td",{className:"",children:e.jsx("p",{className:"text-start mx-1.5 my-2 font-lexend whitespace-nowrap text-sm",children:t.zone_name})}),e.jsx("td",{children:e.jsx("p",{className:" mx-1.5  my-2 font-lexend text-start whitespace-nowrap text-sm",children:t.status})}),e.jsx("td",{children:e.jsx("p",{className:"text-start mx-1.5  my-2 font-lexend whitespace-nowrap text-sm",children:t.created_by_user})}),e.jsx("td",{children:e.jsx("p",{className:"text-start mx-1.5  my-2  font-lexend whitespace-nowrap text-sm",children:L(t.createdAt)})}),e.jsx("td",{children:e.jsx("p",{className:" text-start mx-1.5  my-2 font-lexend whitespace-nowrap text-sm",children:L(t.updatedAt)})}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-start mx-1.5 my-3",children:[e.jsx(oe,{onClick:()=>D(n)}),W(n)&&e.jsxs("div",{className:" bg-white shadow-md rounded-lg ml-1",children:[m&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{d(!0),i(t.zone_id),D()},children:"Edit"}),u&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{l(!0),M(t.zone_id),D()},children:"Delete"})]})]})})]},n))})]})})}),e.jsx("div",{className:" my-3 mb-5 mx-7",children:e.jsxs("nav",{className:"flex items-center flex-column flex-wrap md:flex-row md:justify-between justify-center pt-4","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-700 mb-4 md:mb-0 block w-full md:inline md:w-auto text-center font-alegerya",children:["Showing"," ",e.jsxs("span",{className:"text-gray-700",children:[y+1," to ",Math.min(z,C.length)]})," ","of ",e.jsxs("span",{className:"text-gray-900",children:[C.length," entries"]})]}),e.jsxs("ul",{className:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8 font-alegerya",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>j(1),disabled:r===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-s-lg hover:bg-paginate-bg hover:text-primary-hover",children:"<<"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>j(r-1),disabled:r===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Back"})}),Array.from({length:f},(t,n)=>n+1).slice(Math.max(0,r-2),Math.min(f,r+1)).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>j(t),className:`flex items-center justify-center px-3 h-8 leading-tight border border-paginate-br hover:text-white hover:bg-primary ${r===t?"bg-primary text-white":"bg-white text-black"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>j(r+1),disabled:z>=E.length,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Next"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>j(f),disabled:r===f,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-e-lg hover:bg-paginate-bg hover:text-primary-hover",children:">>"})})]})]})})]})}),c&&e.jsx(ie,{toggleModal:X,handlerefresh:k}),b&&e.jsx(me,{toggleModal:Y,handlerefresh:k,zoneId:h}),x&&e.jsx(ce,{toggleDeleteModal:$,delete:te})]})};export{ge as default};
