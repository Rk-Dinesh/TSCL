import{r as n,i as D,b as L,A as G,d as M,j as e,I as B,F as u,R as E,e as l,g as O}from"./index-Ck5knsAu.js";const $=({permissions:r})=>{const p=r==null?void 0:r.includes("create");r==null||r.includes("edit"),r==null||r.includes("delete"),n.useState(!1);const[o,w]=n.useState(""),[s,y]=n.useState(1),[i]=n.useState(8),[c,N]=n.useState(1),[R,v]=n.useState([]),[h,C]=n.useState([]),S=sessionStorage.getItem("token"),f=D(),k=()=>{f("/form")};n.useEffect(()=>{L.get(`${G}/new-grievance/get`,{headers:{Authorization:`Bearer ${S}`}}).then(t=>{const a=M(t.data.data);C(a);const g=a.filter(_=>Object.values(_).some(A=>A.toString().toLowerCase().includes(o.toLowerCase())));N(Math.ceil(g.length/i));const b=s*i,P=b-i;v(g.slice(P,b))}).catch(t=>{console.error(t)})},[o,s]);const x=t=>{t>0&&t<=c&&y(t)},m=s*i,d=m-i,j=h.filter(t=>Object.values(t).some(a=>a.toString().toLowerCase().includes(o.toLowerCase()))),I=j.slice(d,m);return e.jsx(n.Fragment,{children:e.jsx("div",{className:"  bg-blue-100 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"h-screen",children:[e.jsxs("div",{className:"flex flex-row  gap-3 p-2 mt-3 mx-8 flex-wrap md:justify-end ",children:[e.jsxs("p",{className:"flex items-center gap-3 bg-white px-3 py-1.5 rounded-full",children:[e.jsx(B,{className:"text-xl"}),e.jsx("input",{type:"search",className:"outline-none bg-transparent text-base",placeholder:"Search Grievances",value:o,onChange:t=>w(t.target.value)})]}),p&&e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 font-lexend border-blue-500 bg-slate-100 text-blue-500 rounded-full px-3 py-1.5 justify-center",children:[" ",e.jsx(u,{}),"Bulk Upload"]})}),e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 font-lexend bg-slate-100 text-black rounded-full px-3  py-1.5 w-28 justify-between",children:[" ","CSV ",e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex flex-row  gap-1 justify-between items-center my-2 mx-8 flex-wrap",children:[e.jsx("h1",{className:"md:text-xl text-lg font-medium whitespace-nowrap",children:" New Grievances"}),p&&e.jsxs("button",{className:"flex flex-row-2 gap-2 items-center border-2 bg-blue-500 text-white font-lexend rounded-full p-2.5 w-fit justify-between md:text-base text-sm",onClick:k,children:[e.jsx(u,{})," Add Grievances"]})]}),e.jsx("div",{className:"bg-white mx-4 rounded-lg my-3 py-3 overflow-x-auto h-3/5 no-scrollbar ",children:e.jsxs("table",{className:"w-full  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300 ",children:[e.jsx("th",{className:"",children:e.jsx("p",{className:" mx-6 my-2 font-lexend font-semibold whitespace-nowrap",children:"#"})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-3  my-2 font-lexend font-semibold whitespace-nowrap",children:["Name ",e.jsx(l,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-3  my-2 font-lexend font-semibold whitespace-nowrap",children:["Phone ",e.jsx(l,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-3  my-2 font-lexend font-semibold whitespace-nowrap",children:["Origin",e.jsx(l,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-3  my-2 font-lexend font-semibold whitespace-nowrap",children:["Complaint type",e.jsx(l,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-3  my-2 font-lexend font-semibold whitespace-nowrap",children:["Complaint",e.jsx(l,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-3  my-2 font-lexend font-semibold whitespace-nowrap",children:["Department",e.jsx(l,{})]})}),e.jsx("th",{children:e.jsx("p",{className:"mx-3 my-3 font-lexend font-semibold whitespace-nowrap",children:"Action"})})]})}),e.jsx("tbody",{children:I.map((t,a)=>e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("td",{className:"",children:e.jsx("div",{className:"text-center text-sm mx-3 my-2 font-lexend whitespace-nowrap",children:d+a+1<10?`0${d+a+1}`:d+a+1})}),e.jsx("td",{children:e.jsx("div",{className:" mx-3  my-3 font-lexend whitespace-nowrap text-start text-sm",children:t.public_user_name})}),e.jsx("td",{children:e.jsx("div",{className:" mx-3  my-3  font-lexend whitespace-nowrap text-start text-sm",children:t.phone})}),e.jsx("td",{children:e.jsx("div",{className:" mx-3  my-3 font-lexend whitespace-nowrap text-start text-sm",children:t.grievance_mode})}),e.jsx("td",{children:e.jsx("div",{className:" mx-3  my-3 font-lexend whitespace-nowrap  text-start text-sm",children:t.complaint})}),e.jsx("td",{children:e.jsx("div",{className:" mx-3  my-3 font-lexend whitespace-nowrap text-start text-sm",children:t.complaint_type_title})}),e.jsx("td",{children:e.jsx("div",{className:" mx-3  my-2 font-lexend whitespace-nowrap text-start text-sm",children:t.dept_name})}),e.jsx("td",{children:e.jsx("div",{className:"mx-3 my-3 whitespace-nowrap",onClick:()=>f("/view",{state:{grievanceId:t.grievance_id}}),children:e.jsx(O,{})})})]},a))})]})}),e.jsx("div",{className:" my-3 mb-5 mx-7",children:e.jsxs("nav",{className:"flex items-center flex-column flex-wrap md:flex-row md:justify-between justify-center pt-4","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-700 mb-4 md:mb-0 block w-full md:inline md:w-auto text-center font-alegerya",children:["Showing"," ",e.jsxs("span",{className:"text-gray-700",children:[d+1," to ",Math.min(m,h.length)]})," ","of"," ",e.jsxs("span",{className:"text-gray-900",children:[h.length," entries"]})]}),e.jsxs("ul",{className:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8 font-alegerya",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>x(1),disabled:s===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-s-lg hover:bg-paginate-bg hover:text-primary-hover",children:"<<"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>x(s-1),disabled:s===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Back"})}),Array.from({length:c},(t,a)=>a+1).slice(Math.max(0,s-2),Math.min(c,s+1)).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>x(t),className:`flex items-center justify-center px-3 h-8 leading-tight border border-paginate-br hover:text-white hover:bg-primary ${s===t?"bg-primary text-white":"bg-white text-black"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>x(s+1),disabled:m>=j.length,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Next"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>x(c),disabled:s===c,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-e-lg hover:bg-paginate-bg hover:text-primary-hover",children:">>"})})]})]})})]})})})};export{$ as default};
