import{r,i as R,b,A as u,d as y,j as e,F as _,e as d,f as E,g as L}from"./index-Ck5knsAu.js";const V=()=>{const[x,T]=r.useState(""),[s,w]=r.useState(1),[n]=r.useState(10),[i,v]=r.useState(1),[$,N]=r.useState([]),[c,C]=r.useState([]),m=sessionStorage.getItem("token"),h=R(),[B,S]=r.useState([]);r.useState("All"),r.useEffect(()=>{b.get(`${u}/new-grievance/get`,{headers:{Authorization:`Bearer ${m}`}}).then(t=>{const a=y(t.data.data);C(a);const j=a.filter(P=>Object.values(P).some(D=>D.toString().toLowerCase().includes(x.toLowerCase())));v(Math.ceil(j.length/n));const f=s*n,A=f-n;N(j.slice(A,f))}).catch(t=>{console.error(t)}),I()},[x,s]);const l=t=>{t>0&&t<=i&&w(t)},o=s*n,p=o-n,g=c.filter(t=>Object.values(t).some(a=>a.toString().toLowerCase().includes(x.toLowerCase()))),k=g.slice(p,o),I=async()=>{try{const t=await b.get(`${u}/complainttype/getactive`,{headers:{Authorization:`Bearer ${m}`}}),a=y(t.data.data);S(a)}catch(t){console.error("Error fetching existing Complainttype:",t)}};return e.jsx("div",{className:"overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"  font-lexend h-screen ",children:[e.jsxs("div",{className:"flex justify-between items-center my-4 mx-8 gap-1 flex-wrap",children:[e.jsx("h1",{className:"md:text-lg text-sm ",children:"New Grievance"}),e.jsxs("button",{className:"flex flex-row-2 gap-2 font-medium font-lexend items-center border-2 bg-blue-500 text-white rounded-full py-2 px-3 justify-between md:text-base text-sm",onClick:()=>h("/form",{state:{grievanceId:c.grievance_id}}),children:[e.jsx(_,{})," Add Report"]})]}),e.jsxs("div",{className:"bg-white h-4/5 mx-3 rounded-lg mt-5  p-3",children:[e.jsx("div",{className:"flex justify-between items-center gap-6 mt-2 mx-3",children:e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx("p",{className:"text-lg  whitespace-nowrap",children:"View Report"})})}),e.jsx("div",{className:" rounded-lg  py-3 overflow-x-auto no-scrollbar",children:e.jsxs("table",{className:"w-full mt-2 ",children:[e.jsx("thead",{className:" border-b border-gray-300  ",children:e.jsxs("tr",{className:"",children:[e.jsx("th",{children:e.jsx("p",{className:"mx-1.5 my-2 text-start font-lexend  whitespace-nowrap",children:"Complaint No"})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5 my-2 font-lexend  whitespace-nowrap",children:["Date and Time ",e.jsx(d,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5 my-2 font-lexend  whitespace-nowrap",children:["Raised by ",e.jsx(d,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5 my-2 font-lexend  whitespace-nowrap",children:["Department",e.jsx(d,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5 my-2 font-lexend  whitespace-nowrap",children:["Status ",e.jsx(d,{})]})}),e.jsx("th",{children:e.jsx("p",{className:"flex gap-2 items-center justify-start mx-1.5 my-2 font-lexend  whitespace-nowrap",children:"Action"})})]})}),e.jsx("tbody",{children:k.map((t,a)=>e.jsxs("tr",{className:" border-b border-gray-300  ",children:[e.jsx("td",{children:e.jsx("p",{className:"border-2 w-28 border-gray-500 rounded-lg text-center py-1 my-1  ",children:t.grievance_id})}),e.jsx("td",{children:e.jsx("p",{className:" text-start mx-1.5  my-2 font-lexend whitespace-nowrap text-sm",children:E(t.createdAt)})}),e.jsxs("td",{children:[" ",e.jsx("p",{className:" text-start mx-1.5  my-2 font-lexend whitespace-nowrap text-sm",children:t.public_user_name})]}),e.jsxs("td",{children:[" ",e.jsx("p",{className:" text-start mx-1.5  my-2 font-lexend whitespace-nowrap text-sm",children:t.dept_name})]}),e.jsxs("td",{children:[" ",e.jsx("p",{className:"border w-28 border-gray-500 rounded-full text-center py-1 tex-sm  ",children:t.status})]}),e.jsx("td",{children:e.jsx("div",{className:"mx-3 my-3 whitespace-nowrap",onClick:()=>h("/view",{state:{grievanceId:t.grievance_id}}),children:e.jsx(L,{})})})]},a))})]})})]}),e.jsx("div",{className:" mt-4 mb-5 mx-7",children:e.jsxs("nav",{className:"flex items-center flex-column flex-wrap md:flex-row md:justify-between justify-center ","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-700 mb-4 md:mb-0 block w-full md:inline md:w-auto text-center font-alegerya",children:["Showing"," ",e.jsxs("span",{className:"text-gray-700",children:[p+1," to ",Math.min(o,c.length)]})," ","of ",e.jsxs("span",{className:"text-gray-900",children:[c.length," entries"]})]}),e.jsxs("ul",{className:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8 font-alegerya",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>l(1),disabled:s===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-s-lg hover:bg-paginate-bg hover:text-primary-hover",children:"<<"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>l(s-1),disabled:s===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Back"})}),Array.from({length:i},(t,a)=>a+1).slice(Math.max(0,s-2),Math.min(i,s+1)).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>l(t),className:`flex items-center justify-center px-3 h-8 leading-tight border border-paginate-br hover:text-white hover:bg-primary ${s===t?"bg-primary text-white":"bg-white text-black"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>l(s+1),disabled:o>=g.length,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Next"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>l(i),disabled:s===i,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-e-lg hover:bg-paginate-bg hover:text-primary-hover",children:">>"})})]})]})})]})})};export{V as default};
