import{r as a,w as S,j as e,V as A,b as N,A as u,d as v}from"./index-Ck5knsAu.js";const k=()=>{var j;const[s,y]=a.useState(null),[t,w]=a.useState(null),[b,n]=a.useState(!0),[d,o]=a.useState(null),m=(j=S().state)==null?void 0:j.grievanceId,x=sessionStorage.getItem("token"),[p,h]=a.useState(!1),[f,g]=a.useState(null);if(a.useEffect(()=>{const i=async()=>{try{const c=await N.get(`${u}/new-grievance/getbyid?grievance_id=${m}`,{headers:{Authorization:`Bearer ${x}`}}),r=v(c.data.data);y(r)}catch(c){o(c)}finally{n(!1)}},l=async()=>{try{const c=await N.get(`${u}/new-grievance-attachment/getattachments?grievance_id=${m}`,{headers:{Authorization:`Bearer ${x}`}}),r=v(c.data.data);w(r)}catch(c){o(c)}finally{n(!1)}};i(),l()},[]),b)return e.jsx("p",{children:"Loading..."});if(d)return e.jsxs("p",{children:["Error: ",d.message]});if(!s)return e.jsx("p",{children:"No data found"});const D=()=>{h(!p),g(null)};return e.jsxs(a.Fragment,{children:[e.jsx("div",{className:"h-screen overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"md:mx-6 mx-2  my-5 font-lexend",children:[e.jsxs("p",{children:["Complaint Details #",s.grievance_id]}),e.jsxs("div",{className:"bg-white mt-2 pb-3",children:[e.jsx("p",{className:"px-5 py-2 text-lg",children:"Request By :"}),e.jsx("div",{className:"md:grid md:grid-cols-12 flex gap-3 mx-3 my-1",children:e.jsxs("div",{className:"md:col-span-4 px-5 pb-3",children:[e.jsx("p",{children:s.public_user_name}),e.jsxs("p",{children:["+91 ",s.phone]})," "]})}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 mx-3 my-4",children:[e.jsxs("div",{className:"md:col-span-6 col-span-12 border px-2 py-3 rounded",children:[e.jsx("p",{className:"pt-2 text-lg",children:"Grievance Details"}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"flex flex-col gap-3 mx-2 text-base",children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Origin "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.grievance_mode]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Department "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.dept_name]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Complaint Type "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.complaint]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Complaint "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.complaint_type_title]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Zone "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.zone_name]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Ward "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.ward_name]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Street "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.street_name]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Pincode "}),e.jsxs("p",{className:"col-span-2",children:[": ",s.pincode]})]}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Description: "}),e.jsx("p",{className:"col-start-1 col-span-4 mt-2",children:s.complaint_details})]}),t&&t.length>0&&e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx("p",{className:"col-span-2",children:"Attachment Files "}),e.jsx("div",{className:"col-start-1 col-span-4 mt-2 text-xs  ",children:t.map((i,l)=>e.jsx("button",{className:" mx-1 my-1 px-3 py-1.5 bg-gray-500 rounded-full text-white",onClick:()=>{h(!0),g(i.attachment)},children:`Attachment ${l+1}`},l))})]})]})]}),e.jsxs("div",{className:"md:col-span-6 col-span-12 border px-2 py-3 rounded ",children:[e.jsx("p",{className:"pt-2 text-lg ",children:"Similar Request"}),e.jsx("hr",{className:"my-3 w-full"}),e.jsx("div",{className:"overflow-auto no-scrollbar",children:e.jsxs("table",{className:"w-full bg-gray-200 rounded ",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"items-center mx-3 py-2 font-lexend whitespace-nowrap",children:"Date/Time"}),e.jsx("th",{className:"items-center mx-3 py-2 font-lexend whitespace-nowrap",children:"Complaint No"}),e.jsx("th",{className:"items-center mx-3 py-2 font-lexend whitespace-nowrap",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-300",children:[e.jsxs("tr",{className:"border-b-2  border-gray-300",children:[e.jsx("td",{className:"text-center mx-3 py-2.5 whitespace-nowrap",children:"15-05-2024 / 12:00 AM"}),e.jsx("td",{className:"text-center  mx-3 py-2.5 whitespace-nowrap",children:"R-0001122"}),e.jsx("td",{className:"text-center  mx-3 py-2.5 text-green-600 whitespace-nowrap",children:"In Progress"})]}),e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("td",{className:"text-center mx-2 my-2 whitespace-nowrap",children:"15-05-2024 / 12:00 AM"}),e.jsx("td",{className:"text-center  mx-2 my-2 whitespace-nowrap",children:"R-0001122"}),e.jsx("td",{className:"text-center  mx-2 my-2 text-green-600 whitespace-nowrap",children:"In Progress"})]})]})]})})]})]}),e.jsxs("div",{className:"mx-3 my-3",children:[e.jsx("p",{className:"mb-2 mx-1 text-lg",children:"Complaint History"}),e.jsx("div",{className:"bg-gray-100 py-3",children:e.jsxs("div",{className:"mx-8",children:[e.jsxs("p",{className:"py-3 font-semibold",children:["Complaint No ",s.grievance_id]}),e.jsx("p",{className:"py-2",children:new Date(s.createdAt).toLocaleDateString()}),e.jsxs("div",{className:"grid grid-cols-3 divide-x-2 divide-black",children:[e.jsx("p",{children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx("p",{className:"pl-5 col-span-2",children:"Logged In"})]}),e.jsx("br",{}),e.jsxs("div",{className:"grid grid-cols-3 divide-x-2 divide-black",children:[e.jsx("p",{children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsxs("p",{className:"pl-5 col-span-2",children:["Ticket Raised ",s.grievance_id]})]}),e.jsx("br",{}),e.jsxs("div",{className:"grid grid-cols-3 divide-x-2 divide-black",children:[e.jsx("p",{children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsx("p",{className:"pl-5 col-span-2",children:"Assigned To Particular Department"})]}),e.jsx("br",{}),e.jsx("p",{className:"mb-2",children:new Date(s.updatedAt).toLocaleDateString()}),e.jsxs("div",{className:"grid grid-cols-3 divide-x-2 divide-black",children:[e.jsx("p",{children:new Date(s.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"pl-5",children:"Status:"}),e.jsxs("p",{className:"pl-5 text-gray-500",children:[s.statusflow,"/"]})]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{className:"md:grid md:grid-cols-3 flex border-2 md:mx-20",children:[e.jsx("p",{className:"text-center px-3 py-1.5",children:"Status"}),e.jsx("p",{className:"text-center w-full bg-gray-800 md:col-span-2 text-white py-1.5",children:s.status})]})]})})]})]})]})}),p&&e.jsx(A,{toggleModal:D,attachmentFile:f})]})};export{k as default};
