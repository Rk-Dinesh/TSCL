import{i as Q,k as d,x as ne,r as s,m as oe,o as ie,b as E,A as V,d as H,j as e,I as ce,B as T,s as Te,v as Le}from"./index-Cb3AN3R3.js";import{R as k}from"./index-C-hq6bKM.js";import{D as Ie}from"./DeleteModal-De28Bu6M.js";import{S as Fe,D as Me,E as Ae}from"./DocumentDownload-A0b-q8L_.js";import{P as $e}from"./Pagination-ClPqWgoN.js";import{B as ze}from"./BulkUploadButton-C25cRLG1.js";import{F as Be}from"./FileUploadButton-DWkzr3As.js";import{H as Oe}from"./HeaderButton-By5upfsz.js";import{A as O}from"./ApiClient-w4qWO__2.js";import"./index-Du0g9a49.js";import"./index-CmROlnnr.js";import"./index-BK6gNoz8.js";const J=[{id:1,title:"Complaint Details"},{id:2,title:"Escalation Details"}],le=Q().shape({complaint_type_title:d().required("complaint_type is required"),dept_name:d().test("not-select","select an Department",a=>a!==""&&a!=="Select an Department"),tat_type:d().test("not-select","select an TAT Type",a=>a!==""&&a!=="Select Type"),tat_duration:d().required("Duration is required"),priority:d().required("Priority is required")}),qe=Q().shape({escalation_type:d().test("not-select","select an Type",a=>a!==""&&a!=="Select Type"),escalation_l1:ne().required("L1 duration is required"),role_l1:d().test("not-select","select an L1 role",a=>a!==""&&a!=="Select an Role"),escalation_l2:d().optional(),role_l2:d().optional(),escalation_l3:d().optional(),role_l3:d().optional()}),Re=a=>{const[o,L]=s.useState(0),$=localStorage.getItem("token"),[_,I]=s.useState([]),[q,N]=s.useState(!1),{ExistingDept:z}=a;let v;switch(o){case 0:v=le;break;case 1:v=qe;break;default:v=le}s.useEffect(()=>{},[o]);const{register:u,formState:{errors:n},handleSubmit:w}=oe({resolver:ie(v),mode:"all"});s.useEffect(()=>{E.get(`${V}/designation/getactive`,{headers:{Authorization:`Bearer ${$}`}}).then(r=>{const D=H(r.data.data).reverse();I(D)}).catch(r=>{console.error(r)})},[]);const F=async r=>{if(o!==J.length-1)L(o+1);else{const m={...r,status:"active",created_by_user:localStorage.getItem("name")};try{N(!0);const D=localStorage.getItem("token"),f=await E.post(`${V}/complaint/post`,m,{headers:{Authorization:`Bearer ${D}`}});f.status===200?(T.success("Complaint created Successfully"),N(!1),a.toggleModal(),a.handlerefresh()):(console.error("Error in posting data",f),N(!1),T.error("Failed to Upload"))}catch(D){console.error("Error in posting data",D),N(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex justify-center items-center flex-wrap",children:e.jsx("div",{className:"overflow-hidden shadow-lg bg-white flex items-end justify-between relative font-alegerya mx-2 ",children:e.jsx("div",{className:"min-w-[390px] min-h-[350px] ",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center px-5 text-white bg-primary h-12 flex-wrap",children:[e.jsx("p",{className:"",children:"New Complaint"}),e.jsx("button",{onClick:a.toggleModal,className:"",children:e.jsx(ce,{className:"text-2xl"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-9 relative justify-center mx-60 py-1 rounded-full bg-slate-200 mt-4",children:J.map((r,m)=>e.jsxs("div",{className:"relative items-center item flex last:flex-none group",children:[e.jsx("div",{className:`${o>=m?"bg-black text-white":"bg-white text-slate-900"} transition duration-150 icon-box h-8 w-8 rounded-full flex flex-col items-center justify-center relative z-[66] text-base font-medium`,children:e.jsx("span",{children:m+1})}),m!==J.length-1&&e.jsx("div",{className:`${o>m?"bg-green-900":"bg-[#E0EAFF]"} absolute top-1/2 h-[2px] w-full z-[65]`})]},m))}),e.jsx("div",{className:"conten-box mx-8 my-4",children:e.jsxs("form",{onSubmit:w(F),children:[o===0&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Create Complaint"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"complaint_type_title",children:"Complaint"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline  col-span-2",id:"complaint_type_title",type:"text",placeholder:"Complaint",...u("complaint_type_title")}),n.complaint_type_title&&e.jsx("p",{className:"text-red-500 text-sm text-start -mt-3",children:n.complaint_type_title.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"dept_name",children:"Department"}),e.jsxs("select",{className:"col-span-2  block outline-none px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("dept_name"),id:"dept_name",children:[e.jsx("option",{value:"",children:"Select an Department"}),z.map((r,m)=>e.jsx("option",{value:r.dept_name,children:r.dept_name},m))]}),n.dept_name&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.dept_name.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_type",children:"TAT Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("tat_type"),id:"tat_type",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"day",children:"Days"})]}),n.tat_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.tat_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_duration",children:"Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"tat_duration",type:"text",placeholder:"Duration",...u("tat_duration")}),n.tat_duration&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.tat_duration.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"priority",children:"Priority"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("priority"),id:"priority",children:[e.jsx("option",{value:"",children:"Select Priority"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]}),n.priority&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.priority.message})]})]})}),o===1&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Escalation Details"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_type",children:"Escalation Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("escalation_type"),id:"escalation_type",children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"day",children:"Days"})]}),n.escalation_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.escalation_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l1",children:"L1 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l1",type:"number",placeholder:"L1 Duration",...u("escalation_l1")}),n.escalation_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.escalation_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l1",children:"L1 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("role_l1"),id:"role_l1",children:[e.jsx("option",{value:"",children:"Select an Designation"}),_&&_.map((r,m)=>e.jsx("option",{value:r.designation,children:r.designation},m))]}),n.role_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.role_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l2",children:"L2 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l2",type:"number",placeholder:"L2 Duration",...u("escalation_l2")}),n.escalation_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.escalation_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l2",children:"L2 Role"}),e.jsxs("select",{className:"col-span-2  outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("role_l2"),id:"role_l2",children:[e.jsx("option",{value:"",children:"Select an Designation"}),_&&_.map((r,m)=>e.jsx("option",{value:r.designation,children:r.designation},m))]}),n.role_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.role_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l3",children:"L3 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l3",type:"number",placeholder:"L3 Duration",...u("escalation_l3")}),n.escalation_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.escalation_l3.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l3",children:"L3 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50 dark:bg-white dark:border-gray-200 dark:placeholder-gray-400 dark:text-black hover:border-gray-200",...u("role_l3"),id:"role_l3",children:[e.jsx("option",{value:"",children:"Select an Designation"}),_&&_.map((r,m)=>e.jsx("option",{value:r.designation,children:r.designation},m))]}),n.role_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:n.role_l3.message})]})]})}),e.jsxs("div",{className:"footer flex justify-between items-center py-4 px-12",children:[e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-4 py-1.5 rounded-full",type:"button",onClick:()=>L(o-1),disabled:o===0,children:"Previous"})}),e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-6 py-1.5 rounded-full",type:"submit",children:o===J.length-1?"Save":"Next"})})]})]})})]})]})})})})},K=[{id:1,title:"Complaint Details"},{id:2,title:"Escalation Details"}],re=Q().shape({complaint_type_title:d().required("complaint_type is required"),dept_name:d().test("not-select","select an Department",a=>a!==""&&a!=="Select an Department"),tat_type:d().test("not-select","select an TAT Type",a=>a!==""&&a!=="Select Type"),tat_duration:d().required("Duration is required"),priority:d().required("Priority is required")}),Ue=Q().shape({escalation_type:d().test("not-select","select an Type",a=>a!==""&&a!=="Select Type"),escalation_l1:ne().required("L1 duration is required"),role_l1:d().test("not-select","select an L1 role",a=>a!==""&&a!=="Select an Role"),escalation_l2:d().optional(),role_l2:d().optional(),escalation_l3:d().optional(),role_l3:d().optional(),status:d().test("not-select","Please select an Status",a=>a!==""&&a!=="Status")}),Ve=a=>{const[o,L]=s.useState(0),[$,_]=s.useState(null),[I,q]=s.useState(null),[N,z]=s.useState(null),[v,u]=s.useState(null),[n,w]=s.useState(!1),F=localStorage.getItem("token"),[r,m]=s.useState([]),{ExistingDept:D,comptId:f}=a;let B;switch(o){case 0:B=re;break;case 1:B=Ue;break;default:B=re}s.useEffect(()=>{},[o]);const{register:g,formState:{errors:l},handleSubmit:S,setValue:y}=oe({resolver:ie(B),mode:"all"});s.useEffect(()=>{E.get(`${V}/designation/getactive`,{headers:{Authorization:`Bearer ${F}`}}).then(p=>{const i=H(p.data.data).reverse();m(i)}).catch(p=>{console.error(p)})},[]),s.useEffect(()=>{(async()=>{try{const h=await E.get(`${V}/complaint/getbyid?complaint_id=${f}`,{headers:{Authorization:`Bearer ${F}`}}),i=H(h.data.data);y("complaint_type_title",i.complaint_type_title),y("dept_name",i.dept_name),_(i.dept_name),y("tat_type",i.tat_type),y("tat_duration",i.tat_duration),y("priority",i.priority),y("escalation_type",i.escalation_type),y("escalation_l1",i.escalation_l1),y("role_l1",i.role_l1),q(i.role_l1),y("escalation_l2",i.escalation_l2),y("role_l2",i.role_l2),z(i.role_l2),y("escalation_l3",i.escalation_l3),y("role_l3",i.role_l3),u(i.role_l3),y("status",i.status)}catch(h){console.error("Error fetching data",h)}})()},[f,y]);const G=async p=>{if(o!==K.length-1)L(o+1);else{const h={...p};try{w(!0);const i=await E.post(`${V}/complaint/update?complaint_id=${f}`,h,{headers:{Authorization:`Bearer ${F}`}});i.status===200?(T.success("Complaint Updated Successfully"),w(!1),a.toggleModal(),a.handlerefresh()):(console.error("Error in posting data",i),w(!1),T.error("Failed to Upload"))}catch(i){console.error("Error in posting data",i),w(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex justify-center items-center flex-wrap",children:e.jsx("div",{className:"overflow-hidden shadow-lg bg-white flex items-end justify-between relative font-alegerya mx-2 ",children:e.jsx("div",{className:"min-w-[390px] min-h-[350px] ",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center px-5 text-white bg-primary h-12 flex-wrap",children:[e.jsx("p",{className:"",children:"New Complaint"}),e.jsx("button",{onClick:a.toggleModal,className:"",children:e.jsx(ce,{className:"text-2xl"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-9 relative justify-center mx-60 py-1 rounded-full bg-slate-200 mt-4",children:K.map((p,h)=>e.jsxs("div",{className:"relative items-center item flex last:flex-none group",children:[e.jsx("div",{className:`${o>=h?"bg-black text-white":"bg-white text-slate-900"} transition duration-150 icon-box h-8 w-8 rounded-full flex flex-col items-center justify-center relative z-[66] text-base font-medium`,children:e.jsx("span",{children:h+1})}),h!==K.length-1&&e.jsx("div",{className:`${o>h?"bg-green-900":"bg-[#E0EAFF]"} absolute top-1/2 h-[2px] w-full z-[65]`})]},h))}),e.jsx("div",{className:"conten-box mx-8 my-4",children:e.jsxs("form",{onSubmit:S(G),children:[o===0&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Create Complaint"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"complaint_type_title",children:"Complaint"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline  col-span-2",id:"complaint_type_title",type:"text",placeholder:"Complaint",...g("complaint_type_title")}),l.complaint_type_title&&e.jsx("p",{className:"text-red-500 text-sm text-start -mt-3",children:l.complaint_type_title.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"dept_name",children:"Department"}),e.jsxs("select",{className:"col-span-2  block outline-none px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("dept_name"),id:"dept_name",children:[e.jsx("option",{value:$,children:$}),D.map((p,h)=>e.jsx("option",{value:p.dept_name,children:p.dept_name},h))]}),l.dept_name&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.dept_name.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_type",children:"TAT Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("tat_type"),id:"tat_type",children:[e.jsx("option",{value:"",hidden:!0,children:"Select Type"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"day",children:"Days"})]}),l.tat_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.tat_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"tat_duration",children:"Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"tat_duration",type:"text",placeholder:"Duration",...g("tat_duration")}),l.tat_duration&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.tat_duration.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"priority",children:"Priority"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("priority"),id:"priority",children:[e.jsx("option",{value:"",hidden:!0,children:"Select Priority"}),e.jsx("option",{value:"High",children:"High"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Low",children:"Low"})]}),l.priority&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.priority.message})]})]})}),o===1&&e.jsx("div",{children:e.jsxs("div",{className:"pt-2 font-alegerya flex flex-col gap-3 my-4",children:[e.jsx("div",{className:"",children:e.jsx("h4",{className:"text-xl font-medium text-slate-800 ml-2",children:"Escalation Details"})}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_type",children:"Escalation Type"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("escalation_type"),id:"escalation_type",children:[e.jsx("option",{value:"",hidden:!0,children:"Select Type"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"day",children:"Days"})]}),l.escalation_type&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_type.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l1",children:"L1 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l1",type:"number",placeholder:"L1 Duration",...g("escalation_l1")}),l.escalation_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l1",children:"L1 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("role_l1"),id:"role_l1",children:[e.jsx("option",{value:I,disabled:!0,children:I}),r&&r.map((p,h)=>e.jsx("option",{value:p.designation,children:p.designation},h))]}),l.role_l1&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.role_l1.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l2",children:"L2 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l2",type:"number",placeholder:"L2 Duration",...g("escalation_l2")}),l.escalation_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l2",children:"L2 Role"}),e.jsxs("select",{className:"col-span-2  outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("role_l2"),id:"role_l2",children:[e.jsx("option",{value:N,disabled:!0,children:N}),r&&r.map((p,h)=>e.jsx("option",{value:p.designation,children:p.designation},h))]}),l.role_l2&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.role_l2.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"escalation_l3",children:"L3 Duration"}),e.jsx("input",{className:"appearance-none border rounded-lg py-2 px-3 text-gray-500 leading-relaxed focus:outline-none focus:shadow-outline col-span-2",id:"escalation_l3",type:"number",placeholder:"L3 Duration",...g("escalation_l3")}),l.escalation_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.escalation_l3.message})]}),e.jsxs("div",{className:"grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"role_l3",children:"L3 Role"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",...g("role_l3"),id:"role_l3",children:[e.jsx("option",{value:v,disabled:!0,children:v}),r&&r.map((p,h)=>e.jsx("option",{value:p.designation,children:p.designation},h))]}),l.role_l3&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-3",children:l.role_l3.message})]}),e.jsxs("div",{className:" grid grid-cols-3 items-center gap-3",children:[e.jsx("label",{className:"block text-gray-500 text-base text-start font-normal mb-2 mx-8 col-span-1",htmlFor:"status",children:"Status:"}),e.jsxs("select",{className:"col-span-2 outline-none block px-1 py-3 text-sm text-black border border-gray-200 rounded-lg bg-gray-50     hover:border-gray-200",id:"status",...g("status"),children:[e.jsx("option",{value:"",hidden:!0,children:"Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"InActive"})]}),l.status&&e.jsx("p",{className:"text-red-500 text-xs text-center mb-3 ",children:l.status.message})]})]})}),e.jsxs("div",{className:"footer flex justify-between items-center py-4 px-12",children:[e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-4 py-1.5 rounded-full",type:"button",onClick:()=>L(o-1),disabled:o===0,children:"Previous"})}),e.jsx("div",{className:"flex gap-4 items-center justify-center",children:e.jsx("button",{className:"bg-primary text-white px-6 py-1.5 rounded-full",type:"submit",children:o===K.length-1?"Save":"Next"})})]})]})})]})]})})})})},He=`complaint_type_title,dept_name,tat_type,tat_duration,priority,escalation_type,escalation_l1,role_l1,escalation_l2,role_l2,escalation_l3,role_l3,status,created_by_user
Title,Department,duration,Type,Priority,Type,duration1,role1,duration2,role2,duration3,role3,status,admin
`,rt=({permissions:a})=>{const o=a==null?void 0:a.includes("create"),L=a==null?void 0:a.includes("edit"),$=a==null?void 0:a.includes("delete"),_=a==null?void 0:a.includes("download"),[I,q]=s.useState(!1),[N,z]=s.useState(!1),[v,u]=s.useState(!1),[n,w]=s.useState(null),[F,r]=s.useState(null),[m,D]=s.useState(null),[f,B]=s.useState(""),[g,l]=s.useState(1),[S,y]=s.useState(10),[G,p]=s.useState(1),[h,i]=s.useState([]),[M,de]=s.useState([]),[X,xe]=s.useState(null),[me,Z]=s.useState(null),[ee,te]=s.useState("Bulk Upload"),[pe,he]=s.useState(null),W=t=>{xe(X===t?null:t)},ge=t=>X===t;s.useEffect(()=>{R(),ye()},[f,g,S]);const ue=t=>{t>0&&t<=G&&l(t)},R=()=>{E.get(O.GET_COMPLAINT.url,{headers:O.GET_COMPLAINT.headers}).then(t=>{const c=H(t.data.data);de(c);const P=c.filter(j=>Object.values(j).some(x=>x.toString().toLowerCase().includes(f.toLowerCase())));p(Math.ceil(P.length/S));const C=g*S,A=C-S;i(P.slice(A,C))}).catch(t=>{console.error(t)})},ye=async()=>{try{const t=await E.get(O.GET_DEPT_COMPLAINTACTIVE.url,{headers:O.GET_DEPT_COMPLAINTACTIVE.headers}),c=H(t.data.data);D(c)}catch(t){console.error("Error fetching existing Department:",t)}},be=()=>{q(!I)},je=()=>{z(!N),r(null)},ae=()=>{u(!v),w(null)},Y=g*S,U=Y-S,se=M.filter(t=>Object.values(t).some(c=>c.toString().toLowerCase().includes(f.toLowerCase()))),fe=se.slice().reverse().slice(U,Y),_e=async()=>{try{const t=O.DELETE_COMPLAINT(n);await E.delete(t.url,{headers:t.headers}),ae(),R(),T.success("Deleted successfully")}catch{T.error("Failed to delete")}},Ne=t=>{Z(t.target.files[0]),te("Upload")},ve=()=>{ee==="Bulk Upload"?document.getElementById("fileInput").click():ke(me)},ke=async t=>{try{const c=new FormData;c.append("file",t),(await E.post(O.CSV_COMPLAINT.url,c,{headers:{"Content-Type":"multipart/form-data"}})).status===200?(te("Bulk Upload"),Z(null),R(),T.success("Data Uploaded Successfully")):T.error("Data failed to Upload")}catch(c){console.log(c)}},we=t=>{he(t.target.value)},De=async t=>{if(t==="csv"){const c=M.map(x=>({complaint_id:x.complaint_id,complaint_type_title:x.complaint_type_title,dept_name:x.dept_name,tat_type:x.tat_type,tat_duration:x.tat_duration,priority:x.priority,escalation_type:x.escalation_type,escalation_l1:x.escalation_l1,role_l1:x.role_l1,escalation_l2:x.escalation_l2,role_l2:x.role_l2,escalation_l3:x.escalation_l3,role_l3:x.role_l3,status:x.status,created_by_user:x.created_by_user})),P=[Object.keys(c[0]).join(","),...c.map(x=>Object.values(x).join(","))].join(`
`),C=new Blob([P],{type:"text/csv;charset=utf-8;"}),A=window.URL.createObjectURL(C),j=document.createElement("a");j.setAttribute("href",A),j.setAttribute("download","Complaint_data.csv"),j.style.visibility="hidden",document.body.appendChild(j),j.click(),document.body.removeChild(j)}else if(t==="pdf")try{const P=Math.ceil(M.length/30),C=new Ae("l","mm","a4");let A=0;for(let j=1;j<=P;j++){const x=(j-1)*30,Ee=Math.min(x+30,M.length),Pe=M.slice(x,Ee).map(b=>[b.complaint_id,b.complaint_type_title,b.dept_name,b.tat_type,b.tat_duration,b.priority,b.escalation_type,b.escalation_l1,b.role_l1,b.escalation_l2,b.role_l2,b.escalation_l3,b.role_l3,b.status,b.created_by_user]);C.text(`Page ${j}`,10,A+10),C.autoTable({startY:A+15,head:[["complaint_id","complaint_type_title","dept_name","tat_type","tat_duration","priority","escalation_type","escalation_l1","role_l1","escalation_l2","role_l2","escalation_l3","role_l3","Status","createdBy"]],body:Pe,theme:"striped"}),j<P&&(C.addPage(),A=10)}C.save("Complaint_data.pdf")}catch(c){console.error("Error exporting data:",c)}},Se=()=>{Le(He)},Ce=t=>{const c=parseInt(t.target.value,10);y(c),l(1)};return e.jsxs(s.Fragment,{children:[e.jsx("div",{className:"  bg-blue-100 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"h-screen",children:[e.jsxs("div",{className:"flex flex-row items-center md:justify-end gap-3 p-2 mt-2 mx-8 flex-wrap",children:[e.jsx(Fe,{value:f,onChange:t=>B(t.target.value),placeholder:"Search Complaint"}),o&&e.jsx(Be,{onChange:Ne,buttonText:ee,accept:".csv",onClick:ve}),_&&e.jsx(Me,{selectedDoc:pe,onChange:we,exportData:De})]}),e.jsx(Oe,{title:"Complaint",hasCreatePermission:o,onClick:()=>q(!0)}),e.jsxs("div",{className:`bg-white  mx-4 rounded-lg overflow-x-auto mt-1  p-3 ${M.length<6?"h-3/5":"h-fit"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mx-3",children:[e.jsx("label",{htmlFor:"itemsPerPage",className:"font-medium text-gray-600",children:"Page Entries"}),e.jsxs("select",{id:"itemsPerPage",value:S,onChange:Ce,className:" p-1 outline-none text-sm rounded px-2",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]}),e.jsxs("table",{className:"w-full  ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300 py-1",children:[e.jsx("th",{className:"py-2",children:e.jsx("p",{className:" mx-6 my-2 font-lexend font-semibold whitespace-nowrap",children:"#"})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Complaint ",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Department",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["TAT Type",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Duration",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Priority",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Escalation-1",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Escalation-2",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Escalation-3",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["Status",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsxs("p",{className:"flex gap-2 items-center justify-start mx-1.5  my-2 font-lexend font-semibold whitespace-nowrap",children:["CreatedBy",e.jsx(k,{})]})}),e.jsx("th",{children:e.jsx("p",{className:"mx-3 my-3 text-center font-lexend font-semibold whitespace-nowrap",children:"Action"})})]})}),e.jsx("tbody",{children:fe.map((t,c)=>e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("td",{children:e.jsxs("p",{className:"text-center text-sm mx-3 my-2 font-lexend whitespace-nowrap text-gray-700",children:[" ",U+c+1<10?`0${U+c+1}`:U+c+1]})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.complaint_type_title})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2  font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.dept_name})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2  font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.tat_type})}),e.jsx("td",{children:e.jsx("p",{className:" mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.tat_duration})}),e.jsx("td",{children:e.jsx("p",{className:"mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.priority})}),e.jsx("td",{children:e.jsxs("div",{className:"mx-1.5 my-3 flex gap-3 items-center justify-start text-sm font-lexend",children:[e.jsx("p",{className:" whitespace-nowrap  bg-gray-100 px-2 py-1 rounded-full capitalize text-gray-700",children:t.escalation_l1}),e.jsx("p",{className:"  whitespace-nowrap text-start text-sm capitalize  text-gray-700",children:t.role_l1})]})}),e.jsx("td",{children:e.jsxs("div",{className:"mx-1.5 my-3 flex gap-3 items-center justify-start  font-lexend",children:[e.jsx("p",{className:" whitespace-nowrap bg-gray-100 px-2 py-1 rounded-full text-start text-sm capitalize text-gray-700",children:t&&t.escalation_l2?t.escalation_l2:"---"}),e.jsx("p",{className:" whitespace-nowrap text-sm capitalize text-gray-700",children:t&&t.role_l2?t.role_l2:"---"})]})}),e.jsx("td",{children:e.jsxs("div",{className:"mx-1.5 my-3 flex gap-3 items-center justify-start  font-lexend",children:[e.jsx("p",{className:" whitespace-nowrap bg-gray-100 px-2 py-1 rounded-full text-start text-sm capitalize text-gray-700",children:t&&t.escalation_l3?t.escalation_l3:"---"}),e.jsx("p",{className:" whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t&&t.role_l3?t.role_l3:"---"})]})}),e.jsx("td",{children:e.jsx("div",{className:"mx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.status})}),e.jsx("td",{children:e.jsx("p",{className:"fmx-1.5  my-2 font-lexend whitespace-nowrap text-start text-sm capitalize text-gray-700",children:t.created_by_user})}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-start mx-1.5 my-3",children:[e.jsx(Te,{onClick:()=>W(c)}),ge(c)&&e.jsxs("div",{className:" bg-white shadow-md rounded-lg ml-1",children:[L&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{z(!0),r(t.complaint_id),W()},children:"Edit"}),$&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{u(!0),w(t.complaint_id),W()},children:"Delete"})]})]})})]},c))})]})]}),e.jsxs("div",{className:" my-2 mb-5 mx-7",children:[e.jsx(ze,{handleDownload:Se}),e.jsx($e,{Length:M.length,currentPage:g,totalPages:G,firstIndex:U,lastIndex:Y,paginate:ue,hasNextPage:Y>=se.length})]})]})}),I&&e.jsx(Re,{toggleModal:be,handlerefresh:R,ExistingDept:m}),N&&e.jsx(Ve,{toggleModal:je,handlerefresh:R,ExistingDept:m,comptId:F}),v&&e.jsx(Ie,{toggleDeleteModal:ae,delete:_e})]})};export{rt as default};
