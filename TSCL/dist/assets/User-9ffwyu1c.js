import{c as V,a as m,u as L,o as O,j as e,b as w,A as _,B as C,r as l,d as z,I as le,F as B,R as re,e as v,g as ne,D as de}from"./index-Ck5knsAu.js";const ie=V().shape({public_user_name:m().required("User Name is required"),phone:m().required("Phone Number is required"),email:m().required("Email Id  is required"),address:m().required("Address is required"),pincode:m().required("Pincode is required")}),ce=s=>{const{register:d,formState:{errors:a},handleSubmit:h,setValue:i,watch:p}=L({resolver:O(ie),mode:"all"}),x=async b=>{const g={...b,login_password:"tscl@123",user_status:"active",verification_status:"active"},u=sessionStorage.getItem("token");try{const r=await w.post(`${_}/public-user/post`,g,{headers:{Authorization:`Bearer ${u}`}});r.status===200?(C.success("Public User created Successfully"),s.toggleModal(),s.handlerefresh()):(console.error("Error in posting data",r),C.error("Failed to Upload"))}catch(r){console.error("Error in posting data",r)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex  justify-center items-center  ",children:e.jsx("div",{className:"bg-white w-fit h-fit  font-lexend m-2",children:e.jsxs("form",{onSubmit:h(x),children:[e.jsxs("div",{className:"border-b-2 border-gray-300 mx-10 my-5",children:[e.jsxs("div",{className:" grid grid-cols-3 gap-3",children:[e.jsx("label",{className:"block text-black text-lg font-medium mb-2 col-span-1 whitespace-nowrap",htmlFor:"public_user_name",children:"Name"}),e.jsx("input",{type:"text",id:"public_user_name",className:"mx-2 font-lexend px-2 text-sm text-end outline-none col-span-2",placeholder:"User Name",...d("public_user_name")})]}),a.public_user_name&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:a.public_user_name.message})]}),e.jsxs("div",{className:" flex flex-col gap-3 mx-10 my-1 ",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-1",htmlFor:"Phone",children:"Phone :"}),e.jsx("input",{type:"text",id:"phone",className:"w-6/5 text-end outline-none col-span-2",placeholder:"Phone Number",...d("phone")})]}),a.phone&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:a.phone.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-1",htmlFor:"email",children:"Email Id :"}),e.jsx("input",{type:"email",id:"email",className:" text-end outline-none col-span-2",placeholder:"abc@gmail.com",...d("email")})]}),a.email&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:a.email.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-1",htmlFor:"address",children:"Address :"}),e.jsx("input",{type:"text",id:"address",className:" text-end outline-none col-span-2",placeholder:"Address",...d("address")})]}),a.address&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:a.address.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-1",htmlFor:"pincode",children:"Pincode :"}),e.jsx("input",{type:"text",id:"pincode",className:" text-end outline-none col-span-2",placeholder:"Pincode ",...d("pincode")})]}),a.pincode&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:a.pincode.message})]})]}),e.jsxs("div",{className:"flex justify-end  py-6 mx-10 my-3 gap-5 ",children:[e.jsx("div",{className:"border border-primary text-primary bg-none font-lexend rounded-3xl px-5 py-1.5",onClick:s.toggleModal,children:"cancel"}),e.jsx("button",{className:" text-white bg-primary font-lexend rounded-3xl px-5 py-1.5",children:"Save"})]})]})})})},oe=V().shape({public_user_name:m().required("User Name is required"),address:m().required("Address is required"),pincode:m().required("Pincode is required"),user_status:m().test("not-select","Please select an Status",s=>s!==""&&s!=="Status")}),xe=s=>{const{userId:d}=s,a=sessionStorage.getItem("token"),{register:h,formState:{errors:i},handleSubmit:p,setValue:x,watch:b}=L({resolver:O(oe),mode:"all"});l.useEffect(()=>{(async()=>{try{const r=await w.get(`${_}/public-user/getbyid?public_user_id=${d}`,{headers:{Authorization:`Bearer ${a}`}}),c=z(r.data.data);x("public_user_name",c.public_user_name),x("address",c.address),x("pincode",c.pincode),x("user_status",c.user_status)}catch(r){console.error("Error fetching data",r)}})()},[d,x]);const g=async u=>{const r={...u};try{const c=await w.post(`${_}/public-user/update?public_user_id=${d}`,r,{headers:{Authorization:`Bearer ${a}`}});c.status===200?(C.success("Public User Updated Successfully"),s.toggleModal(),s.handlerefresh()):(console.error("Error in posting data",c),C.error("Failed to Upload"))}catch(c){console.error("Error in posting data",c)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm flex  justify-center items-center  ",children:e.jsx("div",{className:"bg-white w-fit h-fit  font-lexend m-2",children:e.jsxs("form",{onSubmit:p(g),children:[e.jsxs("div",{className:"border-b-2 border-gray-300 mx-10 my-5",children:[e.jsxs("div",{className:" grid grid-cols-3 gap-3",children:[e.jsx("label",{className:"block text-black text-lg font-medium mb-2 col-span-1 whitespace-nowrap",htmlFor:"public_user_name",children:"Name"}),e.jsx("input",{type:"text",id:"public_user_name",className:"mx-2 font-lexend px-2 text-sm text-end outline-none col-span-2",placeholder:"User Name",...h("public_user_name")})]}),i.public_user_name&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:i.public_user_name.message})]}),e.jsxs("div",{className:" flex flex-col gap-3 mx-10 my-1 ",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-1",htmlFor:"address",children:"Address :"}),e.jsx("input",{type:"text",id:"address",className:" text-end outline-none col-span-2",placeholder:"Address",...h("address")})]}),i.address&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:i.address.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-1",htmlFor:"pincode",children:"Pincode :"}),e.jsx("input",{type:"text",id:"pincode",className:" text-end outline-none col-span-2",placeholder:"Pincode ",...h("pincode")})]}),i.pincode&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:i.pincode.message})]}),e.jsxs("div",{children:[e.jsxs("div",{className:" grid grid-cols-3",children:[e.jsx("label",{className:" text-black text-lg font-medium mb-2 col-span-2",htmlFor:"user_status",children:"Status:"}),e.jsxs("select",{className:"   text-sm text-black border border-gray-900 rounded-lg  border-none outline-none",id:"user_status",...h("user_status"),children:[e.jsx("option",{value:"",children:"Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"InActive"})]})]}),i.user_status&&e.jsx("p",{className:"text-red-500 text-xs text-end ",children:i.user_status.message})]})]}),e.jsxs("div",{className:"flex justify-end  py-6 mx-10 my-3 gap-5 ",children:[e.jsx("div",{className:"border border-primary text-primary bg-none font-lexend rounded-3xl px-5 py-1.5",onClick:s.toggleModal,children:"cancel"}),e.jsx("button",{className:" text-white bg-primary font-lexend rounded-3xl px-5 py-1.5",children:"Save"})]})]})})})},ue=({permissions:s})=>{const d=s==null?void 0:s.includes("create"),a=s==null?void 0:s.includes("edit"),h=s==null?void 0:s.includes("delete"),[i,p]=l.useState(!1),[x,b]=l.useState(!1),[g,u]=l.useState(null),[r,c]=l.useState(!1),[R,A]=l.useState(null),[k,T]=l.useState(""),[o,G]=l.useState(1),[j]=l.useState(8),[f,H]=l.useState(1),[me,J]=l.useState([]),[D,K]=l.useState([]),[U,Q]=l.useState(null),M=sessionStorage.getItem("token"),I=t=>{Q(U===t?null:t)},W=t=>U===t;l.useEffect(()=>{S()},[k,o]);const y=t=>{t>0&&t<=f&&G(t)},S=()=>{w.get(`${_}/public-user/get`,{headers:{Authorization:`Bearer ${M}`}}).then(t=>{const n=z(t.data.data);K(n);const q=n.filter(se=>Object.values(se).some(ae=>ae.toString().toLowerCase().includes(k.toLowerCase())));H(Math.ceil(q.length/j));const F=o*j,te=F-j;J(q.slice(te,F))}).catch(t=>{console.error(t)})},X=()=>{p(!i)},Y=()=>{b(!x),u(null)},E=()=>{c(!r),A(null)},P=o*j,N=P-j,$=D.filter(t=>Object.values(t).some(n=>n.toString().toLowerCase().includes(k.toLowerCase()))),Z=$.slice(N,P),ee=async()=>{try{await w.delete(`${_}/public-user/delete?public_user_id=${R}`,{headers:{Authorization:`Bearer ${M}`}}),E(),S(),toast.success("Deleted successfully")}catch{toast.error("Failed to delete")}};return e.jsxs(l.Fragment,{children:[e.jsx("div",{className:"  bg-blue-100 overflow-y-auto no-scrollbar",children:e.jsxs("div",{className:"h-screen",children:[e.jsxs("div",{className:"flex flex-row md:justify-end gap-3 p-2 mt-3 mx-8 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-1.5 rounded-full",children:[e.jsx(le,{className:"text-xl"}),e.jsx("input",{type:"search",className:"outline-none bg-transparent text-base",placeholder:"Search User",value:k,onChange:t=>T(t.target.value)})]}),d&&e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 border-blue-500  font-lexend bg-slate-100 text-blue-500 rounded-full px-3 py-1.5 justify-center",children:[" ",e.jsx(B,{}),"Bulk Upload"]})}),e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex gap-2 items-center border-2 bg-slate-100  font-lexend text-black rounded-full px-3 py-1.5 w-28 justify-between",children:[" ","CSV ",e.jsx(re,{})]})})]}),e.jsxs("div",{className:"flex justify-between items-center my-2 mx-8 gap-1 flex-wrap",children:[e.jsx("h1",{className:"md:text-2xl text-xl font-medium  items-center font-lexend",children:"Public User"}),d&&e.jsx("a",{href:"#",children:e.jsxs("button",{className:"flex flex-row-2 gap-2  items-center border-2  font-lexend bg-blue-500 text-white rounded-full p-2.5 w-fit justify-between md:text-base text-sm ",onClick:()=>p(!0),children:[e.jsx(B,{})," Add PublicUser"]})})]}),e.jsx("div",{className:"bg-white mx-4 rounded-lg my-3  h-3/5 ",children:e.jsx("div",{className:"overflow-x-auto no-scrollbar",children:e.jsxs("table",{className:"w-full  mt-3",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("th",{className:"py-2",children:e.jsx("p",{className:" mx-6 my-2 font-lexend font-semibold whitespace-nowrap",children:"#"})}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-2 items-center justify-start mx-1  my-2 font-lexend font-semibold whitespace-nowrap",children:["Public Username ",e.jsx(v,{})]})}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-2 items-center justify-start mx-1  my-2 font-lexend font-semibold whitespace-nowrap",children:["Phone",e.jsx(v,{})]})}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-2 items-center justify-start mx-1  my-2 font-lexend font-semibold whitespace-nowrap",children:["Email",e.jsx(v,{})]})}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-2 items-center justify-start mx-1  my-2 font-lexend font-semibold whitespace-nowrap",children:["Status",e.jsx(v,{})]})}),e.jsx("th",{children:e.jsxs("div",{className:"flex gap-2 items-center justify-start mx-1  my-2 font-lexend font-semibold whitespace-nowrap",children:["Verification Status",e.jsx(v,{})]})}),e.jsx("th",{children:e.jsx("div",{className:"mx-3 my-3 font-lexend font-semibold whitespace-nowrap text-center",children:"Action"})})]})}),e.jsx("tbody",{children:Z.map((t,n)=>e.jsxs("tr",{className:"border-b-2 border-gray-300",children:[e.jsx("td",{className:"",children:e.jsx("p",{className:"text-center text-sm mx-1 my-2 font-lexend whitespace-nowrap",children:N+n+1<10?`0${N+n+1}`:N+n+1})}),e.jsx("td",{children:e.jsx("p",{className:" mx-1  my-2 font-lexend whitespace-nowrap text-start text-sm ",children:t.public_user_name})}),e.jsx("td",{children:e.jsx("p",{className:" mx-1  my-2 font-lexend whitespace-nowrap text-start text-sm ",children:t.phone})}),e.jsx("td",{children:e.jsx("p",{className:"text-start text-sm mx-1  my-2 font-lexend  whitespace-nowrap ",children:t.email})}),e.jsx("td",{children:e.jsx("p",{className:" mx-1  my-2 font-lexend whitespace-nowrap text-start text-sm ",children:t.user_status})}),e.jsx("td",{children:e.jsx("p",{className:"text-start mx-1  my-2 font-lexend whitespace-nowrap text-sm  ",children:t.verification_status})}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-start mx-1.5 my-3",children:[e.jsx(ne,{onClick:()=>I(n)}),W(n)&&e.jsxs("div",{className:" bg-white shadow-md rounded-lg ml-1",children:[a&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{b(!0),u(t.public_user_id),I()},children:"Edit"}),h&&e.jsx("button",{className:"block px-3 py-1.5 text-sm text-black hover:bg-gray-200 w-full text-left",onClick:()=>{c(!0),A(t.public_user_id),I()},children:"Delete"})]})]})})]},n))})]})})}),e.jsx("div",{className:" my-3 mb-5 mx-7",children:e.jsxs("nav",{className:"flex items-center flex-column flex-wrap md:flex-row md:justify-between justify-center pt-4","aria-label":"Table navigation",children:[e.jsxs("span",{className:"text-sm font-normal text-gray-700 mb-4 md:mb-0 block w-full md:inline md:w-auto text-center font-alegerya",children:["Showing"," ",e.jsxs("span",{className:"text-gray-700",children:[N+1," to ",Math.min(P,D.length)]})," ","of ",e.jsxs("span",{className:"text-gray-900",children:[D.length," entries"]})]}),e.jsxs("ul",{className:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8 font-alegerya",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>y(1),disabled:o===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-s-lg hover:bg-paginate-bg hover:text-primary-hover",children:"<<"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>y(o-1),disabled:o===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Back"})}),Array.from({length:f},(t,n)=>n+1).slice(Math.max(0,o-2),Math.min(f,o+1)).map(t=>e.jsx("li",{children:e.jsx("button",{onClick:()=>y(t),className:`flex items-center justify-center px-3 h-8 leading-tight border border-paginate-br hover:text-white hover:bg-primary ${o===t?"bg-primary text-white":"bg-white text-black"}`,children:t})},t)),e.jsx("li",{children:e.jsx("button",{onClick:()=>y(o+1),disabled:P>=$.length,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br hover:bg-paginate-bg hover:text-primary-hover",children:"Next"})}),e.jsx("li",{children:e.jsx("button",{onClick:()=>y(f),disabled:o===f,className:"flex items-center justify-center px-3 h-8 leading-tight text-primary bg-paginate-bg border border-paginate-br rounded-e-lg hover:bg-paginate-bg hover:text-primary-hover",children:">>"})})]})]})})]})}),i&&e.jsx(ce,{toggleModal:X,handlerefresh:S}),x&&e.jsx(xe,{toggleModal:Y,handlerefresh:S,userId:g}),r&&e.jsx(de,{toggleDeleteModal:E,delete:ee})]})};export{ue as default};
